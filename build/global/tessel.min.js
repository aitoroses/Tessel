!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.Tessel=e(require("react")):t.Tessel=e(t.React)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e={data:t||{}},n=new u["default"],r=new p["default"](e);return n.set(r.get().data),r.on("update",function(){n.set(r.get().data)}),[n,r]}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),u=r(a),c=n(3),f=r(c),l=n(4),h=n(10),p=r(h),d=n(16),v=r(d),_=n(17),y=r(_),m=n(22),g=n(24),b=n(26),w=function(){function t(e){var n=this;i(this,t),this.createStore=g.createStore,this._internal=o(e),this.deferredRun=t.deferredRun.bind(this),this._history=[],this._historyIndex=null,Object.defineProperty(this,"internalData",{get:function(){return n._internal[1].get().data},set:function(t){var e=n._internal[1].get().data.reset(t);n._internal[0].set(e)}})}return s(t,null,[{key:"autorun",value:function(){return f["default"].autorun.apply(this,arguments)}},{key:"createVar",value:function(t){return new u["default"](t)}},{key:"deferredRun",value:function(){for(var e,n,r=arguments.length,i=Array(r),o=0;r>o;o++)i[o]=arguments[o];2==i.length?(e=i[0],n=i[1]):(e=this._internal[0],n=i[0]);var s=0,a=t.autorun(function(){var t=e.get();s>0?n(t):s++});return a}},{key:"flush",value:function(){Object.keys(f["default"]._computations).forEach(function(t){return f["default"]._computations[t].stop()})}},{key:"createActions",value:m.createActions,enumerable:!0},{key:"createAsyncActions",value:m.createAsyncActions,enumerable:!0},{key:"Tracker",value:f["default"],enumerable:!0}]),s(t,[{key:"createRecorder",value:function(){return new b.TesselRecorder(this)}},{key:"set",value:function(t){this.internalData=t}},{key:"get",value:function(){return this._internal[0].get()}},{key:"dehydrate",value:function(){return l.compress(JSON.stringify(this.internalData))}},{key:"rehydrate",value:function(t){this.internalData=JSON.parse(l.uncompress(t))}},{key:"commit",value:function(t){if(this._history.length){var e=null!=t&&t>=0&&t<this._history.length?t:this._history.length-1;this._historyIndex=e;var n=this._history[e];this.set(n)}}},{key:"save",value:function(){this._history.length>9&&this._history.shift(),this._history.push(this.internalData),this.commit()}},{key:"undo",value:function(){return this._history.length&&this._historyIndex>=0?void this.commit(this._historyIndex-1):!1}},{key:"redo",value:function(){return this._history.length&&this._historyIndex>=0?void this.commit(this._historyIndex+1):!1}},{key:"mixin",get:function(){return v["default"].call(this)}},{key:"Component",get:function(){return y["default"].call(this)}}]),t}();e["default"]=w,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(3),s=r(o);i=function(t,e){return this instanceof i?(this.curValue=t,this.equalsFunc=e,void(this.dep=new s["default"].Dependency)):new i(t,e)},i._isEqual=function(t,e){var n=t,r=e;return n!==r?!1:!n||"number"==typeof n||"boolean"==typeof n||"string"==typeof n},i.prototype.get=function(){return s["default"].active&&this.dep.depend(),this.curValue},i.prototype.set=function(t){var e=this.curValue;(this.equalsFunc||i._isEqual)(e,t)||(this.curValue=t,this.dep.changed())},i.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"},i.prototype._numListeners=function(){var t=0;for(var e in this.dep._dependentsById)t++;return t},e["default"]=i,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;n={},n.active=!1,n.currentComputation=null,n._computations={};var r=function(t){n.currentComputation=t,n.active=!!t},i=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.error?function(){console.error.apply(console,arguments)}:function(){}},o=function(t){"undefined"!=typeof Meteor&&Meteor._supressed_log_expected()&&Meteor._suppress_log(t-1)},s=function(t,e){if(p)throw e;var n=["Exception from Tracker "+t+" function:"];if(e.stack&&e.message&&e.name){var r=e.stack.indexOf(e.message);if(0>r||r>e.name.length+2){var s=e.name+": "+e.message;n.push(s)}}n.push(e.stack),o(n.length);for(var a=0;a<n.length;a++)i()(n[a])},a=function(t){return"undefined"==typeof Meteor||Meteor.isClient?t:function(){var e=arguments;Meteor._noYieldsAllowed(function(){t.apply(null,e)})}},u=1,c=[],f=!1,l=!1,h=!1,p=!1,d=[],v=function(){f||("undefined"!=typeof Meteor?Meteor._setImmediate(n._runFlush):setTimeout(n._runFlush,0),f=!0)},_=!1;n.Computation=function(t,e,r){if(!_)throw new Error("Tracker.Computation constructor is private; use Tracker.autorun");_=!1;var i=this;i.stopped=!1,i.invalidated=!1,i.firstRun=!0,i._id=u++,i._onInvalidateCallbacks=[],i._parent=e,i._func=t,i._onError=r,i._recomputing=!1,n._computations[i._id]=i;var o=!0;try{i._compute(),o=!1}finally{i.firstRun=!1,o&&i.stop()}},n.Computation.prototype.onInvalidate=function(t){var e=this;if("function"!=typeof t)throw new Error("onInvalidate requires a function");e.invalidated?n.nonreactive(function(){a(t)(e)}):e._onInvalidateCallbacks.push(t)},n.Computation.prototype.invalidate=function(){var t=this;if(!t.invalidated){t._recomputing||t.stopped||(v(),c.push(this)),t.invalidated=!0;for(var e,r=0;e=t._onInvalidateCallbacks[r];r++)n.nonreactive(function(){a(e)(t)});t._onInvalidateCallbacks=[]}},n.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate(),delete n._computations[this._id])},n.Computation.prototype._compute=function(){var t=this;t.invalidated=!1;var e=n.currentComputation;r(t);var i=h;h=!0;try{a(t._func)(t)}finally{r(e),h=i}},n.Computation.prototype._needsRecompute=function(){var t=this;return t.invalidated&&!t.stopped},n.Computation.prototype._recompute=function(){var t=this;t._recomputing=!0;try{if(t._needsRecompute())try{t._compute()}catch(e){t._onError?t._onError(e):s("recompute",e)}}finally{t._recomputing=!1}},n.Dependency=function(){this._dependentsById={}},n.Dependency.prototype.depend=function(t){if(!t){if(!n.active)return!1;t=n.currentComputation}var e=this,r=t._id;return r in e._dependentsById?!1:(e._dependentsById[r]=t,t.onInvalidate(function(){delete e._dependentsById[r]}),!0)},n.Dependency.prototype.changed=function(){var t=this;for(var e in t._dependentsById)t._dependentsById[e].invalidate()},n.Dependency.prototype.hasDependents=function(){var t=this;for(var e in t._dependentsById)return!0;return!1},n.flush=function(t){n._runFlush({finishSynchronously:!0,throwFirstError:t&&t._throwFirstError})},n._runFlush=function(t){if(l)throw new Error("Can't call Tracker.flush while flushing");if(h)throw new Error("Can't flush inside Tracker.autorun");t=t||{},l=!0,f=!0,p=!!t.throwFirstError;var e=0,r=!1;try{for(;c.length||d.length;){for(;c.length;){var i=c.shift();if(i._recompute(),i._needsRecompute()&&c.unshift(i),!t.finishSynchronously&&++e>1e3)return void(r=!0)}if(d.length){var o=d.shift();try{o()}catch(a){s("afterFlush",a)}}}r=!0}finally{if(r||(l=!1,n._runFlush({finishSynchronously:t.finishSynchronously,throwFirstError:!1})),f=!1,l=!1,c.length||d.length){if(t.finishSynchronously)throw new Error("still have more to do?");setTimeout(v,10)}}},n.autorun=function(t,e){if("function"!=typeof t)throw new Error("Tracker.autorun requires a function argument");e=e||{},_=!0;var r=new n.Computation(t,n.currentComputation,e.onError);return n.active&&n.onInvalidate(function(){r.stop()}),r},n.nonreactive=function(t){var e=n.currentComputation;r(null);try{return t()}finally{r(e)}},n.onInvalidate=function(t){if(!n.active)throw new Error("Tracker.onInvalidate requires a currentComputation");n.currentComputation.onInvalidate(t)},n.afterFlush=function(t){d.push(t),v()},e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){var e,n;try{e=atob(t),n=s(e)}catch(r){throw console.log(n),Error("Failed during base64 decompression for b64 "+t)}try{var i=a.unzip(n),u=o(i);return u}catch(r){throw console.log(n),Error("Failed during GZIP decompression for b64 "+t)}}function i(t){var e=a.zip(s(t)),n=btoa(o(e));return n}function o(t){var e,n,r,i="",o=new Uint16Array(t),s=o.length,a=Math.pow(2,16);for(e=0;s>e;e+=a)n=Math.min(a,s-e),r=o.subarray(e,e+n),i+=String.fromCharCode.apply(null,r);return i}function s(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0,i=t.length;i>r;r++)n[r]=t.charCodeAt(r);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.uncompress=r,e.compress=i,e.ab2str=o,e.str2ab=s;var a=n(5)},function(t,e,n){!function(){"use strict";function e(t,e){e.push(255&t)}function r(t,e){e.push(255&t),e.push(t>>>8)}function i(t,e){r(65535&t,e),r(t>>>16,e)}function o(t,n){var r,i=t.length;for(r=0;i>r;r+=1)e(t.charCodeAt(r),n)}function s(t){return t.shift()}function a(t){return t.shift()|t.shift()<<8}function u(t){var e=a(t),n=a(t);return n>32768?(n-=32768,(n<<16|e)+32768*Math.pow(2,16)):n<<16|e}function c(t){for(var e=[];0!==t[0];)e.push(String.fromCharCode(t.shift()));return t.shift(),e.join("")}function f(t,e){var n,r=[];for(n=0;e>n;n+=1)r.push(t.shift());return r}function l(t,n){var r,s=0,a=[];return n||(n={}),r=n.level||w,"string"==typeof t&&(t=Array.prototype.map.call(t,function(t){return t.charCodeAt(0)})),e(v,a),e(_,a),e(y.deflate,a),n.name&&(s|=m.FNAME),e(s,a),i(n.timestamp||parseInt(Date.now()/1e3,10),a),1===r?e(4,a):9===r?e(2,a):e(0,a),e(g[b],a),n.name&&(o(n.name.substring(n.name.lastIndexOf("/")+1),a),e(0,a)),d.deflate(t,r).forEach(function(t){e(t,a)}),i(parseInt(p(t),16),a),i(t.length,a),a}function h(t,e){var n,r,i,o,l,h,b,w,x,E=Array.prototype.slice.call(t,0);if(s(E)!==v||s(E)!==_)throw"Not a GZIP file";if(n=s(E),n=Object.keys(y).some(function(t){return r=t,y[t]===n}),!n)throw"Unsupported compression method";if(i=s(E),o=u(E),l=s(E),n=s(E),Object.keys(g).some(function(t){return g[t]===n?(h=t,!0):void 0}),i&m.FEXTRA&&(n=a(E),f(E,n)),i&m.FNAME&&c(E),i&m.FCOMMENT&&c(E),i&m.FHCRC&&a(E),"deflate"===r&&(x=d.inflate(E.splice(0,E.length-8))),i&m.FTEXT&&(x=Array.prototype.map.call(x,function(t){return String.fromCharCode(t)}).join("")),b=u(E),b!==parseInt(p(x),16))throw"Checksum does not match";if(w=u(E),w!==x.length)throw"Size of decompressed file not correct";return x}var p=n(6),d=n(7),v=31,_=139,y={deflate:8},m={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},g={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18},b="unix",w=6;t.exports={zip:l,unzip:h,get DEFAULT_LEVEL(){return w}}}()},function(t,e){!function(){"use strict";function e(){var t,e,n;for(e=0;256>e;e+=1){for(t=e,n=0;8>n;n+=1)1&t?t=s^t>>>1:t>>>=1;o[e]=t>>>0}}function n(t){return Array.prototype.map.call(t,function(t){return t.charCodeAt(0)})}function r(t){var e,n,r,i,o=-1;for(e=0,r=t.length;r>e;e+=1){for(i=255&(o^t[e]),n=0;8>n;n+=1)1===(1&i)?i=i>>>1^s:i>>>=1;o=o>>>8^i}return-1^o}function i(t,e){var n,r,s;if("undefined"!=typeof i.crc&&e&&t||(i.crc=-1,t)){for(n=i.crc,r=0,s=t.length;s>r;r+=1)n=n>>>8^o[255&(n^t[r])];return i.crc=n,-1^n}}var o=[],s=3988292384;e(),t.exports=function(t,e){var t="string"==typeof t?n(t):t,o=e?r(t):i(t);return(o>>>0).toString(16)},t.exports.direct=r,t.exports.table=i}()},function(t,e,n){!function(){"use strict";t.exports={inflate:n(8),deflate:n(9)}}()},function(t,e){!function(){function e(){this.next=null,this.list=null}function n(){this.e=0,this.b=0,this.n=0,this.t=null}function r(t,r,i,o,s,a){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var u,c,f,l,h,p,d,v,_,y,m,g,b,w,x,E,O,k=[],A=[],j=new n,P=[],M=[],C=[];for(O=this.root=null,p=0;p<this.BMAX+1;p++)k[p]=0;for(p=0;p<this.BMAX+1;p++)A[p]=0;for(p=0;p<this.BMAX;p++)P[p]=null;for(p=0;p<this.N_MAX;p++)M[p]=0;for(p=0;p<this.BMAX+1;p++)C[p]=0;c=r>256?t[256]:this.BMAX,_=t,y=0,p=r;do k[_[y]]++,y++;while(--p>0);if(k[0]===r)return this.root=null,this.m=0,void(this.status=0);for(d=1;d<=this.BMAX&&0===k[d];d++);for(v=d,d>a&&(a=d),p=this.BMAX;0!==p&&0===k[p];p--);for(l=p,a>p&&(a=p),w=1<<d;p>d;d++,w<<=1)if((w-=k[d])<0)return this.status=2,void(this.m=a);if((w-=k[p])<0)return this.status=2,void(this.m=a);for(k[p]+=w,C[1]=d=0,_=k,y=1,b=2;--p>0;)C[b++]=d+=_[y++];_=t,y=0,p=0;do 0!==(d=_[y++])&&(M[C[d]++]=p);while(++p<r);for(r=C[l],C[0]=p=0,_=M,y=0,h=-1,g=A[0]=0,m=null,x=0,null;l>=v;v++)for(u=k[v];u-->0;){for(;v>g+A[1+h];){if(g+=A[1+h],h++,x=(x=l-g)>a?a:x,(f=1<<(d=v-g))>u+1)for(f-=u+1,b=v;++d<x&&!((f<<=1)<=k[++b]);)f-=k[b];for(g+d>c&&c>g&&(d=c-g),x=1<<d,A[1+h]=d,m=[],E=0;x>E;E++)m[E]=new n;O=O?O.next=new e:this.root=new e,O.next=null,O.list=m,P[h]=m,h>0&&(C[h]=p,j.b=A[h],j.e=16+d,j.t=m,d=(p&(1<<g)-1)>>g-A[h],P[h-1][d].e=j.e,P[h-1][d].b=j.b,P[h-1][d].n=j.n,P[h-1][d].t=j.t)}for(j.b=v-g,y>=r?j.e=99:_[y]<i?(j.e=_[y]<256?16:15,j.n=_[y++]):(j.e=s[_[y]-i],j.n=o[_[y++]-i]),f=1<<v-g,d=p>>g;x>d;d+=f)m[d].e=j.e,m[d].b=j.b,m[d].n=j.n,m[d].t=j.t;for(d=1<<v-1;0!==(p&d);d>>=1)p^=d;for(p^=d;(p&(1<<g)-1)!==C[h];)g-=A[h],h--}this.m=A[1],this.status=0!==w&&1!==l?1:0}function i(){return C.length===F?-1:255&C[F++]}function o(t){for(;t>w;)b|=i()<<w,w+=8}function s(t){return b&z[t]}function a(t){b>>=t,w-=t}function u(t,e,n){var r,i,u;if(0===n)return 0;for(u=0;;){for(o(P),i=A.list[s(P)],r=i.e;r>16;){if(99===r)return-1;a(i.b),r-=16,o(r),i=i.t[s(r)],r=i.e}if(a(i.b),16!==r){if(15===r)break;for(o(r),O=i.n+s(r),a(r),o(M),i=j.list[s(M)],r=i.e;r>16;){if(99===r)return-1;a(i.b),r-=16,o(r),i=i.t[s(r)],r=i.e}for(a(i.b),o(r),k=_-i.n-s(r),a(r);O>0&&n>u;)O--,k&=T-1,_&=T-1,t[e+u++]=v[_++]=v[k++];if(u===n)return n}else if(_&=T-1,t[e+u++]=v[_++]=i.n,u===n)return n}return x=-1,u}function c(t,e,n){var r;if(r=7&w,a(r),o(16),r=s(16),a(16),o(16),r!==(65535&~b))return-1;for(a(16),O=r,r=0;O>0&&n>r;)O--,_&=T-1,o(8),t[e+r++]=v[_++]=s(8),a(8);return 0===O&&(x=-1),r}function f(t,e,n){if(!D){var i,o,s=[];for(i=0;144>i;i++)s[i]=8;for(null;256>i;i++)s[i]=9;for(null;280>i;i++)s[i]=7;for(null;288>i;i++)s[i]=8;if(m=7,o=new r(s,288,257,B,U,m),0!==o.status)return console.error("HufBuild error: "+o.status),-1;for(D=o.root,m=o.m,i=0;30>i;i++)s[i]=5;if(g=5,o=new r(s,30,0,X,Y,g),o.status>1)return D=null,console.error("HufBuild error: "+o.status),-1;y=o.root,g=o.m}return A=D,j=y,P=m,M=g,u(t,e,n)}function l(t,e,n){var i,c,f,l,h,p,d,v,_,y=[];for(i=0;316>i;i++)y[i]=0;if(o(5),d=257+s(5),a(5),o(5),v=1+s(5),a(5),o(4),p=4+s(4),a(4),d>286||v>30)return-1;for(c=0;p>c;c++)o(3),y[q[c]]=s(3),a(3);for(null;19>c;c++)y[q[c]]=0;if(P=7,_=new r(y,19,19,null,null,P),0!==_.status)return-1;for(A=_.root,P=_.m,l=d+v,i=f=0;l>i;)if(o(P),h=A.list[s(P)],c=h.b,a(c),c=h.n,16>c)y[i++]=f=c;else if(16===c){if(o(2),c=3+s(2),a(2),i+c>l)return-1;for(;c-->0;)y[i++]=f}else if(17===c){if(o(3),c=3+s(3),a(3),i+c>l)return-1;for(;c-->0;)y[i++]=0;f=0}else{if(o(7),c=11+s(7),a(7),i+c>l)return-1;for(;c-->0;)y[i++]=0;f=0}if(P=L,_=new r(y,d,257,B,U,P),0===P&&(_.status=1),0!==_.status&&1!==_.status)return-1;for(A=_.root,P=_.m,i=0;v>i;i++)y[i]=y[i+d];return M=N,_=new r(y,v,0,X,Y,M),j=_.root,M=_.m,0===M&&d>257?-1:0!==_.status?-1:u(t,e,n)}function h(){v||(v=[]),_=0,b=0,w=0,x=-1,E=!1,O=k=0,A=null}function p(t,e,n){var r,i;for(r=0;n>r;){if(E&&-1===x)return r;if(O>0){if(x!==R)for(;O>0&&n>r;)O--,k&=T-1,_&=T-1,t[e+r++]=v[_++]=v[k++];else{for(;O>0&&n>r;)O--,_&=T-1,o(8),t[e+r++]=v[_++]=s(8),a(8);0===O&&(x=-1)}if(r===n)return r}if(-1===x){if(E)break;o(1),0!==s(1)&&(E=!0),a(1),o(2),x=s(2),a(2),A=null,O=0}switch(x){case R:i=c(t,e+r,n-r);break;case I:i=A?u(t,e+r,n-r):f(t,e+r,n-r);break;case S:i=A?u(t,e+r,n-r):l(t,e+r,n-r);break;default:i=-1}if(-1===i)return E?0:-1;r+=i}return r}function d(t){var e,n=[];h(),C=t,F=0;do e=p(n,n.length,1024);while(e>0);return C=null,n}var v,_,y,m,g,b,w,x,E,O,k,A,j,P,M,C,F,T=32768,R=0,I=1,S=2,L=9,N=6,D=null,z=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],B=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],X=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];t.exports=d}()},function(t,e){!function(){function e(){this.fc=0,this.dl=0}function n(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function r(t,e,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r}function i(){this.next=null,this.len=0,this.ptr=[],this.off=0}function o(t){var r;if(t?1>t?t=1:t>9&&(t=9):t=Vt,vt=t,H=!1,lt=!1,null===je){for(Y=q=W=null,je=[],Z=[],K=[],Q=[],$=[],mt=[],r=0;ke>r;r++)mt[r]=new e;for(gt=[],r=0;2*be+1>r;r++)gt[r]=new e;for(bt=[],r=0;ge+2>r;r++)bt[r]=new e;for(wt=[],r=0;be>r;r++)wt[r]=new e;for(xt=[],r=0;2*we+1>r;r++)xt[r]=new e;Et=new n,Ot=new n,kt=new n,At=[],jt=[],Ct=[],Ft=[],Tt=[],Rt=[],It=[],St=[]}}function s(t){t.next=Y,Y=t}function a(){var t;return null!==Y?(t=Y,Y=Y.next):t=new i,t.next=null,t.len=t.off=0,t}function u(t){return $[Wt+t]}function c(t,e){return $[Wt+t]=e}function f(t){je[J+G++]=t,J+G===Qt&&U()}function l(t){t&=65535,Qt-2>J+G?(je[J+G++]=255&t,je[J+G++]=t>>>8):(f(255&t),f(t>>>8))}function h(){rt=(rt<<Ae^255&Z[ct+te-1])&ae,it=u(rt),$[ct&ue]=it,c(rt,ct)}function p(t,e){D(e[t].fc,e[t].dl)}function d(t){return 255&(256>t?Tt[t]:Tt[256+(t>>7)])}function v(t,e,n){return t[e].fc<t[n].fc||t[e].fc===t[n].fc&&Ct[e]<=Ct[n]}function _(t,e,n){var r;for(r=0;n>r&&qt<Yt.length;r++)t[e+r]=255&Yt[qt++];return r}function y(){var t;for(t=0;se>t;t++)$[Wt+t]=0;if(dt=Te[vt].max_lazy,_t=Te[vt].good_length,Zt||(yt=Te[vt].nice_length),pt=Te[vt].max_chain,ct=0,nt=0,ht=_(Z,0,2*Wt),0>=ht)return lt=!0,void(ht=0);for(lt=!1;le>ht&&!lt;)g();for(rt=0,t=0;te-1>t;t++)rt=(rt<<Ae^255&Z[t])&ae}function m(t){var e,n,r,i,o=pt,s=ct,a=ut,u=ct>he?ct-he:ce,c=ct+ee,f=Z[s+a-1],l=Z[s+a];ut>=_t&&(o>>=2);do if(e=t,Z[e+a]===l&&Z[e+a-1]===f&&Z[e]===Z[s]&&Z[++e]===Z[s+1]){for(s+=2,e++;c>s;){for(i=!1,r=0;8>r;r+=1)if(s+=1,e+=1,Z[s]!==Z[e]){i=!0;break}if(i)break}if(n=ee-(c-s),s=c-ee,n>a){if(ft=t,a=n,Zt){if(n>=ee)break}else if(n>=yt)break;f=Z[s+a-1],l=Z[s+a]}}while((t=$[t&ue])>u&&0!==--o);return a}function g(){var t,e,n=$t-ht-ct;if(-1===n)n--;else if(ct>=Wt+he){for(t=0;Wt>t;t++)Z[t]=Z[t+Wt];for(ft-=Wt,ct-=Wt,nt-=Wt,t=0;se>t;t++)e=u(t),c(t,e>=Wt?e-Wt:ce);for(t=0;Wt>t;t++)e=$[t],$[t]=e>=Wt?e-Wt:ce;n+=Wt}lt||(t=_(Z,ct+ht,n),0>=t?lt=!0:ht+=t)}function b(){for(;0!==ht&&null===q;){var t;if(h(),it!==ce&&he>=ct-it&&(at=m(it),at>ht&&(at=ht)),at>=te)if(t=L(ct-ft,at-te),ht-=at,dt>=at){at--;do ct++,h();while(0!==--at);ct++}else ct+=at,at=0,rt=255&Z[ct],rt=(rt<<Ae^255&Z[ct+1])&ae;else t=L(0,255&Z[ct]),ht--,ct++;for(t&&(S(0),nt=ct);le>ht&&!lt;)g()}}function w(){for(;0!==ht&&null===q;){if(h(),ut=at,ot=ft,at=te-1,it!==ce&&dt>ut&&he>=ct-it&&(at=m(it),at>ht&&(at=ht),at===te&&ct-ft>fe&&at--),ut>=te&&ut>=at){var t;t=L(ct-1-ot,ut-te),ht-=ut-1,ut-=2;do ct++,h();while(0!==--ut);st=!1,at=te-1,ct++,t&&(S(0),nt=ct)}else st?(L(0,255&Z[ct-1])&&(S(0),nt=ct),ct++,ht--):(st=!0,ct++,ht--);for(;le>ht&&!lt;)g()}}function x(){lt||(tt=0,et=0,k(),y(),q=null,G=0,J=0,3>=vt?(ut=te-1,at=0):(at=te-1,st=!1),V=!1)}function E(t,e,n){var r;return H||(x(),H=!0,0!==ht)?(r=O(t,e,n),r===n?n:V?r:(3>=vt?b():w(),0===ht&&(st&&L(0,255&Z[ct-1]),S(1),V=!0),r+O(t,r+e,n-r))):(V=!0,0)}function O(t,e,n){var r,i,o;for(r=0;null!==q&&n>r;){for(i=n-r,i>q.len&&(i=q.len),o=0;i>o;o++)t[e+r+o]=q.ptr[q.off+o];if(q.off+=i,q.len-=i,r+=i,0===q.len){var a;a=q,q=q.next,s(a)}}if(r===n)return r;if(G>J){for(i=n-r,i>G-J&&(i=G-J),o=0;i>o;o++)t[e+r+o]=je[J+o];J+=i,r+=i,G===J&&(G=J=0)}return r}function k(){var t,e,n,r,i;if(0===wt[0].dl){for(Et.dyn_tree=mt,Et.static_tree=bt,Et.extra_bits=Pe,Et.extra_base=ye+1,Et.elems=ge,Et.max_length=de,Et.max_code=0,Ot.dyn_tree=gt,Ot.static_tree=wt,Ot.extra_bits=Me,Ot.extra_base=0,Ot.elems=be,Ot.max_length=de,Ot.max_code=0,kt.dyn_tree=xt,kt.static_tree=null,kt.extra_bits=Ce,kt.extra_base=0,kt.elems=we,kt.max_length=ve,kt.max_code=0,n=0,r=0;_e-1>r;r++)for(Rt[r]=n,t=0;t<1<<Pe[r];t++)Ft[n++]=r;for(Ft[n-1]=r,i=0,r=0;16>r;r++)for(It[r]=i,t=0;t<1<<Me[r];t++)Tt[i++]=r;for(i>>=7;be>r;r++)for(It[r]=i<<7,t=0;t<1<<Me[r]-7;t++)Tt[256+i++]=r;for(e=0;de>=e;e++)At[e]=0;for(t=0;143>=t;)bt[t++].dl=8,At[8]++;for(;255>=t;)bt[t++].dl=9,At[9]++;for(;279>=t;)bt[t++].dl=7,At[7]++;for(;287>=t;)bt[t++].dl=8,At[8]++;for(M(bt,ge+1),t=0;be>t;t++)wt[t].dl=5,wt[t].fc=z(t,5);A()}}function A(){var t;for(t=0;ge>t;t++)mt[t].fc=0;for(t=0;be>t;t++)gt[t].fc=0;for(t=0;we>t;t++)xt[t].fc=0;mt[me].fc=1,Ut=Xt=0,Lt=Nt=Dt=0,zt=0,Bt=1}function j(t,e){for(var n=jt[e],r=e<<1;Pt>=r&&(Pt>r&&v(t,jt[r+1],jt[r])&&r++,!v(t,n,jt[r]));)jt[e]=jt[r],e=r,r<<=1;jt[e]=n}function P(t){var e,n,r,i,o,s,a=t.dyn_tree,u=t.extra_bits,c=t.extra_base,f=t.max_code,l=t.max_length,h=t.static_tree,p=0;for(i=0;de>=i;i++)At[i]=0;for(a[jt[Mt]].dl=0,e=Mt+1;ke>e;e++)n=jt[e],i=a[a[n].dl].dl+1,i>l&&(i=l,p++),a[n].dl=i,n>f||(At[i]++,o=0,n>=c&&(o=u[n-c]),s=a[n].fc,Ut+=s*(i+o),null!==h&&(Xt+=s*(h[n].dl+o)));if(0!==p){do{for(i=l-1;0===At[i];)i--;At[i]--,At[i+1]+=2,At[l]--,p-=2}while(p>0);for(i=l;0!==i;i--)for(n=At[i];0!==n;)r=jt[--e],r>f||(a[r].dl!==i&&(Ut+=(i-a[r].dl)*a[r].fc,a[r].fc=i),n--)}}function M(t,e){var n,r,i=[],o=0;for(n=1;de>=n;n++)o=o+At[n-1]<<1,i[n]=o;for(r=0;e>=r;r++){var s=t[r].dl;0!==s&&(t[r].fc=z(i[s]++,s))}}function C(t){var e,n,r=t.dyn_tree,i=t.static_tree,o=t.elems,s=-1,a=o;for(Pt=0,Mt=ke,e=0;o>e;e++)0!==r[e].fc?(jt[++Pt]=s=e,Ct[e]=0):r[e].dl=0;for(;2>Pt;){var u=jt[++Pt]=2>s?++s:0;r[u].fc=1,Ct[u]=0,Ut--,null!==i&&(Xt-=i[u].dl)}for(t.max_code=s,e=Pt>>1;e>=1;e--)j(r,e);do e=jt[pe],jt[pe]=jt[Pt--],j(r,pe),n=jt[pe],jt[--Mt]=e,jt[--Mt]=n,r[a].fc=r[e].fc+r[n].fc,Ct[e]>Ct[n]+1?Ct[a]=Ct[e]:Ct[a]=Ct[n]+1,r[e].dl=r[n].dl=a,jt[pe]=a++,j(r,pe);while(Pt>=2);jt[--Mt]=jt[pe],P(t),M(r,s)}function F(t,e){var n,r,i=-1,o=t[0].dl,s=0,a=7,u=4;for(0===o&&(a=138,u=3),t[e+1].dl=65535,n=0;e>=n;n++)r=o,o=t[n+1].dl,++s<a&&r===o||(u>s?xt[r].fc+=s:0!==r?(r!==i&&xt[r].fc++,xt[xe].fc++):10>=s?xt[Ee].fc++:xt[Oe].fc++,s=0,i=r,0===o?(a=138,u=3):r===o?(a=6,u=3):(a=7,u=4))}function T(t,e){var n,r,i=-1,o=t[0].dl,s=0,a=7,u=4;for(0===o&&(a=138,u=3),n=0;e>=n;n++)if(r=o,o=t[n+1].dl,!(++s<a&&r===o)){if(u>s){do p(r,xt);while(0!==--s)}else 0!==r?(r!==i&&(p(r,xt),s--),p(xe,xt),D(s-3,2)):10>=s?(p(Ee,xt),D(s-3,3)):(p(Oe,xt),D(s-11,7));s=0,i=r,0===o?(a=138,u=3):r===o?(a=6,u=3):(a=7,u=4)}}function R(){var t;for(F(mt,Et.max_code),F(gt,Ot.max_code),C(kt),t=we-1;t>=3&&0===xt[Fe[t]].dl;t--);return Ut+=3*(t+1)+5+5+4,t}function I(t,e,n){var r;for(D(t-257,5),D(e-1,5),D(n-4,4),r=0;n>r;r++)D(xt[Fe[r]].dl,3);T(mt,t-1),T(gt,e-1)}function S(t){var e,n,r,i,o;if(i=ct-nt,St[Dt]=zt,C(Et),C(Ot),r=R(),e=Ut+3+7>>3,n=Xt+3+7>>3,e>=n&&(e=n),e>=i+4&&nt>=0)for(D((Ht<<1)+t,3),B(),l(i),l(~i),o=0;i>o;o++)f(Z[nt+o]);else n===e?(D((Gt<<1)+t,3),N(bt,wt)):(D((Jt<<1)+t,3),I(Et.max_code+1,Ot.max_code+1,r+1),N(mt,gt));A(),0!==t&&B()}function L(t,e){if(Q[Lt++]=e,0===t?mt[e].fc++:(t--,mt[Ft[e]+ye+1].fc++,gt[d(t)].fc++,K[Nt++]=t,zt|=Bt),Bt<<=1,0===(7&Lt)&&(St[Dt++]=zt,zt=0,Bt=1),vt>2&&0===(4095&Lt)){var n,r=8*Lt,i=ct-nt;for(n=0;be>n;n++)r+=gt[n].fc*(5+Me[n]);if(r>>=3,Nt<parseInt(Lt/2,10)&&r<parseInt(i/2,10))return!0}return Lt===re-1||Nt===oe}function N(t,e){var n,r,i,o,s=0,a=0,u=0,c=0;if(0!==Lt)do 0===(7&s)&&(c=St[u++]),r=255&Q[s++],0===(1&c)?p(r,t):(i=Ft[r],p(i+ye+1,t),o=Pe[i],0!==o&&(r-=Rt[i],D(r,o)),n=K[a++],i=d(n),p(i,e),o=Me[i],0!==o&&(n-=It[i],D(n,o))),c>>=1;while(Lt>s);p(me,t)}function D(t,e){et>Re-e?(tt|=t<<et,l(tt),tt=t>>Re-et,et+=e-Re):(tt|=t<<et,et+=e)}function z(t,e){var n=0;do n|=1&t,t>>=1,n<<=1;while(--e>0);return n>>1}function B(){et>8?l(tt):et>0&&f(tt),tt=0,et=0}function U(){var t,e;if(0!==G){for(t=a(),null===q?q=W=t:W=W.next=t,t.len=G-J,e=0;e<t.len;e++)t.ptr[e]=je[J+e];G=J=0}}function X(t,e){var n,r;Yt=t,qt=0,"undefined"==typeof e&&(e=Vt),o(e),r=[];do n=E(r,r.length,1024);while(n>0);return Yt=null,r}var Y,q,W,H,G,J,V,Z,K,Q,$,tt,et,nt,rt,it,ot,st,at,ut,ct,ft,lt,ht,pt,dt,vt,_t,yt,mt,gt,bt,wt,xt,Et,Ot,kt,At,jt,Pt,Mt,Ct,Ft,Tt,Rt,It,St,Lt,Nt,Dt,zt,Bt,Ut,Xt,Yt,qt,Wt=32768,Ht=0,Gt=1,Jt=2,Vt=6,Zt=!1,Kt=32768,Qt=8192,$t=2*Wt,te=3,ee=258,ne=16,re=8192,ie=15,oe=re,se=1<<ie,ae=se-1,ue=Wt-1,ce=0,fe=4096,le=ee+te+1,he=Wt-le,pe=1,de=15,ve=7,_e=29,ye=256,me=256,ge=ye+1+_e,be=30,we=19,xe=16,Ee=17,Oe=18,ke=2*ge+1,Ae=parseInt((ie+te-1)/te,10),je=null;re>Kt&&console.error("error: INBUFSIZ is too small"),Wt<<1>1<<ne&&console.error("error: WSIZE is too large"),ie>ne-1&&console.error("error: HASH_BITS is too large"),(8>ie||258!==ee)&&console.error("error: Code too clever");var Pe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Me=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Te=[new r(0,0,0,0),new r(4,4,8,4),new r(4,5,16,8),new r(4,6,32,32),new r(4,4,16,16),new r(8,16,32,32),new r(8,16,128,128),new r(8,32,128,256),new r(32,128,258,1024),new r(32,258,258,4096)],Re=16;t.exports=X,t.exports.DEFAULT_LEVEL=Vt}()},function(t,e,n){var r=n(11);t.exports=r},function(t,e,n){"use strict";var r=n(12),i=n(13),o=(n(14),n(15)),s=function(t,e){var n,i=this,s=e&&e.mutable||!1,a=e&&e.live||a,u=[],c=0,f=function(t){var e,n=t.__;for(n.listener&&(o.trigger(t,"update",0,!0),n.parents.length||n.listener.trigger("immediate","now")),e=0;e<n.parents.length;e++)h("now",n.parents[e])},l=function(t){u.push(t),c||(c=1,r.nextTick(function(){u=[],c=0}))},h=function(t,e,n){var i;e.__;if("listener"==t)return o.createListener(e);if("now"==t){if(u.length)for(;u.length;)i=u.shift(),f(i);else f(e);return e}var s=o.update(t,e,n);if("pivot"!=t){var a=r.findPivot(s);if(a)return l(s),a}return s},p=function(){};s||(p=function(t){Object.freeze(t)}),n=o.freeze(t,h,p,a);var d=n.getListener(),v=!1;d.on("immediate",function(t,e){if("now"==t){if(!v)return;return v=!1,i.trigger("update",n)}if(t==n)return n=e,a?i.trigger("update",e):void(v||(v=!0,r.nextTick(function(){v&&(v=!1,i.trigger("update",n))})))}),r.addNE(this,{get:function(){return n},set:function(t){var e=h("reset",n,t);e.__.listener.trigger("immediate",n,e)}}),r.addNE(this,{getData:this.get,setData:this.set}),this._events=[]};s.prototype=r.createNonEnumerable({constructor:s},i),t.exports=s},function(t,e){"use strict";var n=new Function("return this")(),r={extend:function(t,e){for(var n in e)t[n]=e[n];return t},createNonEnumerable:function(t,e){var n={};for(var r in t)n[r]={value:t[r]};return Object.create(e||{},n)},error:function(t){var e=new Error(t);if(console)return console.error(e);throw e},each:function(t,e){var n,r,i;if(t&&t.constructor==Array)for(n=0,r=t.length;r>n;n++)e(t[n],n);else for(i=Object.keys(t),n=0,r=i.length;r>n;n++)e(t[i[n]],i[n])},addNE:function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!0,value:e[n]})},nextTick:function(){function t(){for(;r=i.shift();)r();o=!1}function e(t){i.push(t),o||(o=!0,u())}var r,i=[],o=!1,s=!!n.postMessage&&"undefined"!=typeof Window&&n instanceof Window,a="nexttick",u=function(){return s?function(){n.postMessage(a,"*")}:function(){setTimeout(function(){c()},0)}}(),c=function(){return s?function(e){e.source===n&&e.data===a&&(e.stopPropagation(),t())}:t}();return s&&n.addEventListener("message",c,!0),e.removeListener=function(){n.removeEventListener("message",c,!0)},e}(),findPivot:function(t){if(t&&t.__){if(t.__.pivot)return t;for(var e,n=0,r=t.__.parents,i=0;!n&&i<r.length;)e=r[i],e.__.pivot&&(n=e),i++;if(n)return n;for(i=0;!n&&i<r.length;)n=this.findPivot(r[i]),i++;return n}}};t.exports=r},function(t,e,n){"use strict";var r=n(12),i="beforeAll",o="afterAll",s=["immediate",i,o],a={on:function(t,e,n){var r=this._events[t]||[];return r.push({callback:e,once:n}),this._events[t]=r,this},once:function(t,e){return this.on(t,e,!0)},off:function(t,e){if("undefined"==typeof t)this._events={};else if("undefined"==typeof e)this._events[t]=[];else{var n,r=this._events[t]||[];for(n=r.length-1;n>=0;n--)r[n].callback===e&&r.splice(n,1)}return this},trigger:function(t){var e,n,r=[].slice.call(arguments,1),a=this._events[t]||[],u=[],c=-1!=s.indexOf(t);for(c||this.trigger.apply(this,[i,t].concat(r)),e=0;e<a.length;e++)n=a[e],n.callback?n.callback.apply(this,r):n.once=!0,n.once&&u.push(e);for(e=u.length-1;e>=0;e--)a.splice(u[e],1);return c||this.trigger.apply(this,[o,t].concat(r)),this}},u=r.createNonEnumerable(a);t.exports=u},function(t,e,n){"use strict";var r=n(12),i=function(t){var e={};for(var n in t)e[n]={writable:!0,configurable:!0,enumerable:!1,value:t[n]};return e},o={set:function(t,e){var n=t,r=this.__.trans;if("object"!=typeof t&&(n={},n[t]=e),!r){for(var i in n)r=r||this[i]!=n[i];if(!r)return this}return this.__.notify("merge",this,n)},reset:function(t){return this.__.notify("replace",this,t)},getListener:function(){return this.__.notify("listener",this)},toJS:function(){var t;return t=this.constructor==Array?new Array(this.length):{},r.each(this,function(e,n){e&&e.__?t[n]=e.toJS():t[n]=e}),t},transact:function(){return this.__.notify("transact",this)},run:function(){return this.__.notify("run",this)},now:function(){return this.__.notify("now",this)},pivot:function(){return this.__.notify("pivot",this)}},s=r.extend({push:function(t){return this.append([t])},append:function(t){return t&&t.length?this.__.notify("splice",this,[this.length,0].concat(t)):this},pop:function(){return this.length?this.__.notify("splice",this,[this.length-1,1]):this},unshift:function(t){return this.prepend([t])},prepend:function(t){return t&&t.length?this.__.notify("splice",this,[0,0].concat(t)):this},shift:function(){return this.length?this.__.notify("splice",this,[0,1]):this},splice:function(t,e,n){return this.__.notify("splice",this,arguments)}},o),a=Object.create(Array.prototype,i(s)),u={Hash:Object.create(Object.prototype,i(r.extend({remove:function(t){var e=[],n=t;t.constructor!=Array&&(n=[t]);for(var r=0,i=n.length;i>r;r++)this.hasOwnProperty(n[r])&&e.push(n[r]);return e.length?this.__.notify("remove",this,e):this}},o))),List:a,arrayMethods:s};t.exports=u},function(t,e,n){"use strict";var r=n(12),i=n(14),o=n(13),s={freeze:function(t,e,n,o){if(t&&t.__)return t;var s,a,u=this;return s=t.constructor==Array?this.createArray(t.length):Object.create(i.Hash),r.addNE(s,{__:{listener:!1,parents:[],notify:e,freezeFn:n,live:o||!1}}),r.each(t,function(t,r){a=t&&t.constructor,(a==Array||a==Object)&&(t=u.freeze(t,e,n,o)),t&&t.__&&u.addParent(t,s),s[r]=t}),n(s),s},update:function(t,e,n){return this[t]?this[t](e,n):r.error("Unknown update type: "+t)},reset:function(t,e){var n=this,i=t.__,o=e;return o.__||(o=this.freeze(e,i.notify,i.freezeFn,i.live)),o.__.listener=i.listener,o.__.parents=i.parents,this.fixChildren(o,t),r.each(o,function(e){e&&e.__&&(n.removeParent(t),n.addParent(e,o))}),o},merge:function(t,e){var n=t.__,i=n.trans,e=r.extend({},e);if(i){for(var o in e)i[o]=e[o];return t}var s,a,u,c,f=this,l=this.copyMeta(t),h=n.notify;r.each(t,function(r,i){return c=r&&r.__,c&&f.removeParent(r,t),(s=e[i])?(a=s&&s.constructor,(a==Array||a==Object)&&(s=f.freeze(s,h,n.freezeFn,n.live)),s&&s.__&&f.addParent(s,l),delete e[i],void(l[i]=s)):(c&&f.addParent(r,l),l[i]=r)});for(u in e)s=e[u],a=s&&s.constructor,(a==Array||a==Object)&&(s=f.freeze(s,h,n.freezeFn,n.live)),
s&&s.__&&f.addParent(s,l),l[u]=s;return n.freezeFn(l),this.refreshParents(t,l),l},replace:function(t,e){var n=this,r=e&&e.constructor,i=t.__,o=e;(r==Array||r==Object)&&(o=n.freeze(e,i.notify,i.freezeFn,i.live),o.__.parents=i.parents,i.listener&&(o.__.listener=i.listener),this.trigger(o,"update",o,i.live)),!i.parents.length&&i.listener&&i.listener.trigger("immediate",t,o);for(var s=i.parents.length-1;s>=0;s--)0==s?this.refresh(i.parents[s],t,o):this.markDirty(i.parents[s],[t,o]);return o},remove:function(t,e){var n=t.__.trans;if(n){for(var i=e.length-1;i>=0;i--)delete n[e[i]];return t}var o,s=this,a=this.copyMeta(t);return r.each(t,function(n,r){o=n&&n.__,o&&s.removeParent(n,t),-1==e.indexOf(r)&&(o&&s.addParent(n,a),a[r]=n)}),t.__.freezeFn(a),this.refreshParents(t,a),a},splice:function(t,e){var n=t.__,i=n.trans;if(i)return i.splice.apply(i,e),t;var o,s,a=this,u=this.copyMeta(t),c=e[0],f=c+e[1];if(r.each(t,function(e,n){e&&e.__&&(a.removeParent(e,t),(c>n||n>=f)&&a.addParent(e,u)),u[n]=e}),e.length>1)for(var l=e.length-1;l>=2;l--)s=e[l],o=s&&s.constructor,(o==Array||o==Object)&&(s=this.freeze(s,n.notify,n.freezeFn,n.live)),s&&s.__&&this.addParent(s,u),e[l]=s;return Array.prototype.splice.apply(u,e),t.__.freezeFn(u),this.refreshParents(t,u),u},transact:function(t){var e,n=this,i=t.__.trans;return i?i:(e=t.constructor==Array?[]:{},r.each(t,function(t,n){e[n]=t}),t.__.trans=e,r.nextTick(function(){t.__.trans&&n.run(t)}),e)},run:function(t){var e=this,n=t.__.trans;if(!n)return t;r.each(n,function(n,r){n&&n.__&&e.removeParent(n,t)}),delete t.__.trans;var i=this.replace(t,n);return i},pivot:function(t){return t.__.pivot=1,this.unpivot(t),t},unpivot:function(t){r.nextTick(function(){t.__.pivot=0})},refresh:function(t,e,n){var i=this,o=t.__.trans,s=0;if(o)return r.each(o,function(r,a){s||r===e&&(o[a]=n,s=1,n&&n.__&&i.addParent(n,t))}),t;var a,u=this.copyMeta(t);r.each(t,function(r,o){r===e&&(r=n),r&&(a=r.__)&&(i.removeParent(r,t),i.addParent(r,u)),u[o]=r}),t.__.freezeFn(u),this.refreshParents(t,u)},fixChildren:function(t,e){var n=this;r.each(t,function(r){if(r&&r.__){if(-1!=r.__.parents.indexOf(t))return n.fixChildren(r);if(1==r.__.parents.length)return r.__.parents=[t];e&&n.removeParent(r,e),n.addParent(r,t)}})},copyMeta:function(t){var e;e=t.constructor==Array?this.createArray(t.length):Object.create(i.Hash);var n=t.__;return r.addNE(e,{__:{notify:n.notify,listener:n.listener,parents:n.parents.slice(0),trans:n.trans,freezeFn:n.freezeFn,pivot:n.pivot,live:n.live}}),n.pivot&&this.unpivot(e),e},refreshParents:function(t,e){var n,r=t.__;if(this.trigger(e,"update",e,r.live),r.parents.length)for(n=r.parents.length-1;n>=0;n--)this.refresh(r.parents[n],t,e);else r.listener&&r.listener.trigger("immediate",t,e)},removeParent:function(t,e){var n=t.__.parents,r=n.indexOf(e);-1!=r&&n.splice(r,1)},addParent:function(t,e){var n=t.__.parents,r=n.indexOf(e);-1==r&&(n[n.length]=e)},trigger:function(t,e,n,i){var o=t.__.listener;if(o){var s=o.ticking;if(i)return void((s||n)&&(o.ticking=0,o.trigger(e,s||n)));o.ticking=n,s||r.nextTick(function(){if(o.ticking){var t=o.ticking;o.ticking=0,o.trigger(e,t)}})}},createListener:function(t){var e=t.__.listener;return e||(e=Object.create(o,{_events:{value:{},writable:!0}}),t.__.listener=e),e},createArray:function(){return[].__proto__?function(t){var e=new Array(t);return e.__proto__=i.List,e}:function(t){var e=new Array(t),n=i.arrayMethods;for(var r in n)e[r]=n[r];return e}}()};t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(1),o=r(i);t.exports=function(){var t=this,e={getInitialState:function(){return t.get()},componentDidMount:function(){var e=this,n=this._computations=this._computations||[],r=o["default"].autorun(function(){e.setState(t.get())});n.push(r)},componentWillUnmount:function(){this._computations.forEach(function(t){return t.stop()})}};return e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=s,r=!0,a=c=void 0}},a=n(18),u=r(a),c=n(19);t.exports=function(){var t=this.mixin,e=function(e){function n(){i(this,r),s(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,arguments)}o(n,e);var r=n;return n=c.decorate(t)(n)||n}(u["default"].Component);return e}},function(e,n){e.exports=t},function(t,e,n){function r(t){var e=t.getDefaultProps;e&&(t.defaultProps=e(),delete t.getDefaultProps)}function i(t){function e(t){var e=t.state||{};a(e,n.call(t)),t.state=e}var n=t.getInitialState,r=t.componentWillMount;n&&(r?t.componentWillMount=function(){e(this),r.call(this)}:t.componentWillMount=function(){e(this)},delete t.getInitialState)}function o(t,e){r(e),i(e);var n={},a={};Object.keys(e).forEach(function(t){"mixins"!==t&&"statics"!==t&&("function"==typeof e[t]?n[t]=e[t]:a[t]=e[t])}),u(t.prototype,n);var c=function(t,e,n){if(!t)return e;if(!e)return t;var r={};return Object.keys(t).forEach(function(n){e[n]||(r[n]=t[n])}),Object.keys(e).forEach(function(n){t[n]?r[n]=function(){return e[n].apply(this,arguments)&&t[n].apply(this,arguments)}:r[n]=e[n]}),r};return s({childContextTypes:c,contextTypes:c,propTypes:s.MANY_MERGED_LOOSE,defaultProps:s.MANY_MERGED_LOOSE})(t,a),e.statics&&Object.getOwnPropertyNames(e.statics).forEach(function(n){var r=t[n],i=e.statics[n];if(void 0!==r&&void 0!==i)throw new TypeError("Cannot mixin statics because statics."+n+" and Component."+n+" are defined.");t[n]=void 0!==r?r:i}),e.mixins&&e.mixins.reverse().forEach(o.bind(null,t)),t}var s=n(20),a=n(21),u=s({componentDidMount:s.MANY,componentWillMount:s.MANY,componentWillReceiveProps:s.MANY,shouldComponentUpdate:s.ONCE,componentWillUpdate:s.MANY,componentDidUpdate:s.MANY,componentWillUnmount:s.MANY,getChildContext:s.MANY_MERGED});t.exports=function(){var t=u;return t.onClass=function(t,e){var n=a({},e);return o(t,n)},t.decorate=function(e){return function(n){var r=function(t){n.apply(this,arguments)};return Object.setPrototypeOf(r,n),r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t.onClass(r,e)}},t}()},function(t,e){var n=function(t){return Object.prototype.toString.call(t)},r=function(t){throw t},i=t.exports=function(t,e){function r(t,e,n){e in t?t[e]=n:Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}var o=e||{};return o.unknownFunction||(o.unknownFunction=i.ONCE),o.nonFunctionProperty||(o.nonFunctionProperty=function(t,e,r){if(void 0!==t&&void 0!==e){var i=function(t){return t&&t.constructor&&t.constructor.name?t.constructor.name:n(t).slice(8,-1)};throw new TypeError("Cannot mixin key "+r+" because it is provided by multiple sources, and the types are "+i(t)+" and "+i(e))}return void 0===t?e:t}),function(e,n){Object.keys(n).forEach(function(i){var s=e[i],a=n[i],u=t[i];if(void 0!==s||void 0!==a){var c=function(t){return"function"!=typeof t?t:function(){return t.call(this,arguments)}};if(u){var f=u(s,a,i);return void r(e,i,c(f))}var l="function"==typeof s,h="function"==typeof a;return l&&void 0===a||h&&void 0===s||l&&h?void r(e,i,c(o.unknownFunction(s,a,i))):void(e[i]=o.nonFunctionProperty(s,a,i))}})}};i._mergeObjects=function(t,e){var i=function(t,e){var i=n(t);if("[object Object]"!==i){var o=t.constructor?t.constructor.name:"Unknown",s=e.constructor?e.constructor.name:"Unknown";r("cannot merge returned value of type "+o+" with an "+s)}};if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);i(t,e),i(e,t);var o={};return Object.keys(t).forEach(function(n){Object.prototype.hasOwnProperty.call(e,n)&&r("cannot merge returns because both have the "+JSON.stringify(n)+" key"),o[n]=t[n]}),Object.keys(e).forEach(function(t){o[t]=e[t]}),o},i.ONCE=function(t,e,n){if(t&&e)throw new TypeError("Cannot mixin "+n+" because it has a unique constraint.");var r=t||e;return function(t){return r.apply(this,t)}},i.MANY=function(t,e,n){return function(n){return e&&e.apply(this,n),t?t.apply(this,n):void 0}},i.MANY_MERGED_LOOSE=function(t,e,n){return t&&e?i._mergeObjects(t,e):t||e},i.MANY_MERGED=function(t,e,n){return function(n){var r=e&&e.apply(this,n),o=t&&t.apply(this,n);return r&&o?i._mergeObjects(r,o):o||r}},i.REDUCE_LEFT=function(t,e,n){var r=t||function(t){return t},i=e||function(t){return t};return function(t){return i.call(this,r.apply(this,t))}},i.REDUCE_RIGHT=function(t,e,n){var r=t||function(t){return t},i=e||function(t){return t};return function(t){return r.call(this,i.apply(this,t))}}},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var o,s,a=n(t),u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var c in o)r.call(o,c)&&(a[c]=o[c]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(o);for(var f=0;f<s.length;f++)i.call(o,s[f])&&(a[s[f]]=o[s[f]])}}return a}},function(t,e,n){"use strict";function r(t){var e={};return Array.isArray(t)?t.forEach(function(t){e[t]=o()}):Object.keys(t).forEach(function(n){e[n]=o(t[n])}),e}function i(t){var e={};return Array.isArray(t)?t.forEach(function(t){e[t]=o.async()}):Object.keys(t).forEach(function(n){e[n]=o.async(t[n])}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.createActions=r,e.createAsyncActions=i;var o=n(23)},function(t,e){"use strict";function n(t,e){function n(t){return n.emit(t)}return n._listeners=[],t&&o(n,t),o(n,e)}function r(t){return n(t,r.methods)}function i(t){return o(n(t,i.methods),r.methods)}function o(t,e){for(var n in e)if(e.hasOwnProperty(n)){if(t.hasOwnProperty(n))continue;t[n]=e[n]}return t}r.methods={_cb:function(t,e){return function(n,r){return t.call(e,n,r)}},_listen:function(t,e,n){var r=this._cb(t,e);this._listeners.push(r),r.ctx=e,r.fn=t,r.once=n;var i=this;return function(){var t=i._listeners.indexOf(r);return-1===t?!1:(i._listeners.splice(t,1),!0)}},listenOnce:function(t,e){return this._listen(t,e,!0)},listen:function(t,e){return this._listen(t,e,!1)},unlisten:function(t,e){for(var n=0;n<this._listeners.length;n++){var r=this._listeners[n];if(r.fn===t&&r.ctx===e)return this._listeners.splice(n,1),!0}return!1},shouldEmit:function(){return!0},beforeEmit:function(t){return t},_beforeEmit:function(t){return t},_afterEmit:function(t){return t},emit:function(){var t=Array.prototype.slice.call(arguments);t.length<2&&(t=t[0]),t=this.beforeEmit(t);var e=this._beforeEmit(t),n=e;if(!this.shouldEmit(t))return n;for(var r=0;r<this._listeners.length;r++){var i=this._listeners[r];n=i(t,n,e),i.once&&(this._listeners.splice(r,1),r-=1)}return n=this._afterEmit(n,e)}},i.methods={_cb:function(t,e){return function(n,r,i){return r.then(function(r){return i._cancelled?Promise.reject(new Error(i._cancelled)):t.call(e,n,r)})}},_beforeEmit:function(t){return o(Promise.resolve(t),{_cancelled:!1})},_afterEmit:function(t,e){return o(t.then(function(t){return e._cancelled?Promise.reject(new Error(e._cancelled)):t}),{cancel:function(t){e._cancelled=t||"cancelled"},cancelled:function(){return Boolean(e._cancelled)}})}},r.async=i,t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){function e(e){Object.getOwnPropertyNames(e).forEach(function(n){"constructor"!=n&&(t.prototype[n]=e[n])})}var n=new h(this);e(h.prototype),e(n);var r=new t;return r}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.createStore=s;var u=n(25),c=r(u),f=n(1),l=r(f),h=function(){function t(e){o(this,t),this._emitter=new c["default"],this._tessel=e}return a(t,[{key:"bindState",value:function(t){var e=this,n=this.state;Object.defineProperty(this,"state",{get:function(){return e._tessel.internalData[t]},set:function(n){return n?(e._lastState=e.state,e._tessel.internalData.set(i({},t,n))):void 0}}),this.state=n,this._lastState=this.state;var r=this;r._tessel._internal[1].on("update",function(){r.state!==r._lastState&&r._emitter.emit("update")})}},{key:"on",value:function(){this._emitter.on.apply(this._emitter,arguments)}},{key:"createActions",value:function(t){var e=this,n=t.prototype,r=Object.getOwnPropertyNames(n).filter(function(t){return"constructor"!=t}),i=l["default"].createAsyncActions(r);return r.forEach(function(t){i[t].listen(function(r){return new Promise(function(){for(var i=arguments.length,o=Array(i),s=0;i>s;s++)o[s]=arguments[s];n[t].apply(e.state,[r].concat(o))})})}),i}},{key:"getStateDescriptor",value:function(){var t=this;return Object.defineProperties({},{state:{get:function(){return t.state},set:function(e){return t.state=e},configurable:!0,enumerable:!0}})}}]),t}()},function(t,e,n){var r;!function(i){function o(){this._events={},this._conf&&s.call(this,this._conf)}function s(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function a(t){this._events={},this.newListener=!1,s.call(this,t)}function u(t,e,n,r){if(!n)return[];var i,o,s,a,c,f,l,h=[],p=e.length,d=e[r],v=e[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;o>i;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(h=h.concat(u(t,e,n[s],r+1)));return h}if("**"===d){l=r+1===p||r+2===p&&"*"===v,l&&n._listeners&&(h=h.concat(u(t,e,n,p)));for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!l&&(h=h.concat(u(t,e,n[s],p))),h=h.concat(u(t,e,n[s],r))):h=s===v?h.concat(u(t,e,n[s],r+2)):h.concat(u(t,e,n[s],r)));return h}h=h.concat(u(t,e,n[d],r+1))}if(a=n["*"],a&&u(t,e,a,r+1),c=n["**"])if(p>r){c._listeners&&u(t,e,c,p);for(s in c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===v?u(t,e,c[s],r+2):s===d?u(t,e,c[s],r+1):(f={},f[s]=c[s],u(t,e,{"**":f},r+1)))}else c._listeners?u(t,e,c,p):c["*"]&&c["*"]._listeners&&u(t,e,c["*"],p);return h}function c(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;r>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var i=this.listenerTree,o=t.shift();o;){if(i[o]||(i[o]={}),i=i[o],0===t.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,e];else if(f(i._listeners)&&(i._listeners.push(e),!i._listeners.warned)){var s=l;"undefined"!=typeof this._events.maxListeners&&(s=this._events.maxListeners),s>0&&i._listeners.length>s&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=e;return!0}o=t.shift()}return!0}var f=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;a.prototype.delimiter=".",a.prototype.setMaxListeners=function(t){this._events||o.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},a.prototype.event="",a.prototype.once=function(t,e){return this.many(t,1,e),this},a.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},a.prototype.emit=function(){this._events||o.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];for(r=0,e=this._all.length;e>r;r++)this.event=t,this._all[r].apply(this,n)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var i;if(this.wildcard){i=[];var s="string"==typeof t?t.split(this.delimiter):t.slice();u.call(this,i,s,this.listenerTree,0)}else i=this._events[t];if("function"==typeof i){if(this.event=t,1===arguments.length)i.call(this);else if(arguments.length>1)switch(arguments.length){case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];i.apply(this,n)}return!0}if(i){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];for(var a=i.slice(),r=0,e=a.length;e>r;r++)this.event=t,a[r].apply(this,n);return a.length>0||!!this._all}return!!this._all},a.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||o.call(this),this.emit("newListener",t,e),this.wildcard)return c.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(f(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var n=l;"undefined"!=typeof this._events.maxListeners&&(n=this._events.maxListeners),n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=e;return this},a.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},a.prototype.addListener=a.prototype.on,a.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();r=u.call(this,null,i,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var s=r[o];if(n=s._listeners,f(n)){for(var a=-1,c=0,l=n.length;l>c;c++)if(n[c]===e||n[c].listener&&n[c].listener===e||n[c]._origin&&n[c]._origin===e){a=c;break}if(0>a)continue;return this.wildcard?s._listeners.splice(a,1):this._events[t].splice(a,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete s._listeners:delete this._events[t])}return this},a.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;r>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||o.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),n=u.call(this,null,e,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},a.prototype.listeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return u.call(this,e,n,this.listenerTree,0),e}return this._events||o.call(this),this._events[t]||(this._events[t]=[]),f(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},a.prototype.listenersAny=function(){return this._all?this._all:[]},r=function(){return a}.call(e,n,e,t),!(r!==i&&(t.exports=r))}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),s=function(){function t(e){var n=this;r(this,t),this.context=e,this.recording=!1,this.stateRecords=void 0,this.replaying=!1,this.context._internal[1].on("update",function(){1==n.recording&&n.addRecord(n.context.internalData)})}return i(t,[{key:"isRecording",value:function(){return this.recording}},{key:"isReplaying",value:function(){return this.replaying}},{key:"startRecording",value:function(){console.debug("Start recording"),this.recording=!0,this.stateRecords=[];var t=this.context.get();this.addRecord(t)}},{key:"addRecord",value:function(t){console.debug("Adding record",t),this.stateRecords.push({time:Date.now(),state:t})}},{key:"stopRecording",value:function(){this.recording=!1,this.context._internal[1].off("update",this._listenContext)}},{key:"replayStateRecord",value:function(t){this.context.set(t.state)}},{key:"step",value:function(t){this.replayStateRecord(this.stateRecords[t])}},{key:"replay",value:function(t){if(!this.stateRecords||this.stateRecords.length<1)return void console.error("At least 2 records are needed to replay");try{this.replaying=!0;var t=t||1,e=this.stateRecords[0],n=this.stateRecords[this.stateRecords.length-1],r=(n.time-e.time,this.stateRecords.map(function(t){var n=t.time-e.time;return{record:t,offset:n}})),i=0,o=0,s=10,a=setInterval(function(){this.replayStateRecord(r[o].record);var e=r.length>o+1;if(e){var n=r[o+1],u=n.offset<=i;u&&(o+=1,console.debug("Playing to next record")),i+=s*t}else console.debug("End of replay"),clearInterval(a)}.bind(this),s)}catch(u){console.error("Error during replay of state records",this.stateRecords,u),console.error(u.stack)}finally{this.replaying=!1}}},{key:"dehydrate",value:function(){return o.compress(JSON.stringify(this.stateRecords))}},{key:"rehydrate",value:function(t){this.stateRecords=JSON.parse(o.uncompress(t))}}]),t}();e.TesselRecorder=s}])});