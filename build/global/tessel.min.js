!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.Tessel=e():t.Tessel=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";t.exports=n(1)},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),s=r(a),u=n(3),c=r(u),f=n(4),h=r(f),l=function(){function t(e){i(this,t);var n=this._reactiveVar=new s["default"],r=this._store=new h["default"](e||{});n.set(r.get()),r.on("update",function(){n.set(r.get())})}return o(t,[{key:"set",value:function(t){this._store.set(t)}},{key:"get",value:function(t){return this._reactiveVar.get()}}],[{key:"Tracker",value:c["default"],enumerable:!0},{key:"autorun",value:function(){c["default"].autorun.apply(this,arguments)}}]),t}();e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(3),a=r(o);i=function(t,e){return this instanceof i?(this.curValue=t,this.equalsFunc=e,void(this.dep=new a["default"].Dependency)):new i(t,e)},i._isEqual=function(t,e){var n=t,r=e;return n!==r?!1:!n||"number"==typeof n||"boolean"==typeof n||"string"==typeof n},i.prototype.get=function(){return a["default"].active&&this.dep.depend(),this.curValue},i.prototype.set=function(t){var e=this.curValue;(this.equalsFunc||i._isEqual)(e,t)||(this.curValue=t,this.dep.changed())},i.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"},i.prototype._numListeners=function(){var t=0;for(var e in this.dep._dependentsById)t++;return t},e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;r={},r.active=!1,r.currentComputation=null,r._computations={};var i=function(t){r.currentComputation=t,r.active=!!t},o=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.error?function(){console.error.apply(console,arguments)}:function(){}},a=function(t){"undefined"!=typeof Meteor&&Meteor._supressed_log_expected()&&Meteor._suppress_log(t-1)},s=function(t,e){if(_)throw e;var n=["Exception from Tracker "+t+" function:"];if(e.stack&&e.message&&e.name){var r=e.stack.indexOf(e.message);if(0>r||r>e.name.length+2){var i=e.name+": "+e.message;n.push(i)}}n.push(e.stack),a(n.length);for(var s=0;s<n.length;s++)o()(n[s])},u=function(t){return"undefined"==typeof Meteor||Meteor.isClient?t:function(){var e=arguments;Meteor._noYieldsAllowed(function(){t.apply(null,e)})}},c=1,f=[],h=!1,l=!1,p=!1,_=!1,d=[],v=function(){h||("undefined"!=typeof Meteor?Meteor._setImmediate(r._runFlush):setTimeout(r._runFlush,0),h=!0)},y=!1;r.Computation=function(t,e,n){if(!y)throw new Error("Tracker.Computation constructor is private; use Tracker.autorun");y=!1;var i=this;i.stopped=!1,i.invalidated=!1,i.firstRun=!0,i._id=c++,i._onInvalidateCallbacks=[],i._parent=e,i._func=t,i._onError=n,i._recomputing=!1,r._computations[i._id]=i;var o=!0;try{i._compute(),o=!1}finally{i.firstRun=!1,o&&i.stop()}},r.Computation.prototype.onInvalidate=function(t){var e=this;if("function"!=typeof t)throw new Error("onInvalidate requires a function");e.invalidated?r.nonreactive(function(){u(t)(e)}):e._onInvalidateCallbacks.push(t)},r.Computation.prototype.invalidate=function(){var t=this;if(!t.invalidated){t._recomputing||t.stopped||(v(),f.push(this)),t.invalidated=!0;for(var e,n=0;e=t._onInvalidateCallbacks[n];n++)r.nonreactive(function(){u(e)(t)});t._onInvalidateCallbacks=[]}},r.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate(),delete r._computations[this._id])},r.Computation.prototype._compute=function(){var t=this;t.invalidated=!1;var e=r.currentComputation;i(t);var n=p;p=!0;try{u(t._func)(t)}finally{i(e),p=n}},r.Computation.prototype._needsRecompute=function(){var t=this;return t.invalidated&&!t.stopped},r.Computation.prototype._recompute=function(){var t=this;t._recomputing=!0;try{if(t._needsRecompute())try{t._compute()}catch(e){t._onError?t._onError(e):s("recompute",e)}}finally{t._recomputing=!1}},r.Dependency=function(){this._dependentsById={}},r.Dependency.prototype.depend=function(t){if(!t){if(!r.active)return!1;t=r.currentComputation}var e=this,n=t._id;return n in e._dependentsById?!1:(e._dependentsById[n]=t,t.onInvalidate(function(){delete e._dependentsById[n]}),!0)},r.Dependency.prototype.changed=function(){var t=this;for(var e in t._dependentsById)t._dependentsById[e].invalidate()},r.Dependency.prototype.hasDependents=function(){var t=this;for(var e in t._dependentsById)return!0;return!1},r.flush=function(t){r._runFlush({finishSynchronously:!0,throwFirstError:t&&t._throwFirstError})},r._runFlush=function(t){if(l)throw new Error("Can't call Tracker.flush while flushing");if(p)throw new Error("Can't flush inside Tracker.autorun");t=t||{},l=!0,h=!0,_=!!t.throwFirstError;var e=0,n=!1;try{for(;f.length||d.length;){for(;f.length;){var i=f.shift();if(i._recompute(),i._needsRecompute()&&f.unshift(i),!t.finishSynchronously&&++e>1e3)return void(n=!0)}if(d.length){var o=d.shift();try{o()}catch(a){s("afterFlush",a)}}}n=!0}finally{if(n||(l=!1,r._runFlush({finishSynchronously:t.finishSynchronously,throwFirstError:!1})),h=!1,l=!1,f.length||d.length){if(t.finishSynchronously)throw new Error("still have more to do?");setTimeout(v,10)}}},r.autorun=function(t,e){if("function"!=typeof t)throw new Error("Tracker.autorun requires a function argument");e=e||{},y=!0;var n=new r.Computation(t,r.currentComputation,e.onError);return r.active&&r.onInvalidate(function(){n.stop()}),n},r.nonreactive=function(t){var e=r.currentComputation;i(null);try{return t()}finally{i(e)}},r.onInvalidate=function(t){if(!r.active)throw new Error("Tracker.onInvalidate requires a currentComputation");r.currentComputation.onInvalidate(t)},r.afterFlush=function(t){d.push(t),v()},e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(5);t.exports=r},function(t,e,n){"use strict";var r=n(6),i=n(7),o=(n(8),n(9)),a=function(t,e){var n,i=this,a=function(t,e,n){return"listener"==t?o.createListener(e):o.update(t,e,n)},s=function(){};e||(s=function(t){Object.freeze(t)}),n=o.freeze(t,a,s);var u=n.getListener(),c=!1;u.on("immediate",function(t,e){t==n&&(n=e,c||(c=!0,r.nextTick(function(){c=!1,i.trigger("update",n)})))}),r.addNE(this,{get:function(){return n},set:function(t){var e=a("reset",n,t);e.__.listener.trigger("immediate",n,e)}}),r.addNE(this,{getData:this.get,setData:this.set}),this._events=[]};a.prototype=r.createNonEnumerable({},i),t.exports=a},function(t,e,n){"use strict";var r=new Function("return this")(),i={extend:function(t,e){for(var n in e)t[n]=e[n];return t},createNonEnumerable:function(t,e){var n={};for(var r in t)n[r]={value:t[r]};return Object.create(e||{},n)},error:function(t){var e=new Error(t);if(console)return console.error(e);throw e},each:function(t,e){var n,r,i;if(t&&t.constructor==Array)for(n=0,r=t.length;r>n;n++)e(t[n],n);else for(i=Object.keys(t),n=0,r=i.length;r>n;n++)e(t[i[n]],i[n])},addNE:function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!0,value:e[n]})},nextTick:function(){function t(){for(;n=i.shift();)n();o=!1}function e(t){i.push(t),o||(o=!0,u())}var n,i=[],o=!1,a=!!r.postMessage,s="nexttick",u=function(){return a?function(){r.postMessage(s,"*")}:function(){setTimeout(function(){c()},0)}}(),c=function(){return a?function(e){e.source===r&&e.data===s&&(e.stopPropagation(),t())}:t}();return a&&r.addEventListener("message",c,!0),e.removeListener=function(){r.removeEventListener("message",c,!0)},e}()};t.exports=i},function(t,e,n){"use strict";var r=n(6),i={on:function(t,e,n){var r=this._events[t]||[];return r.push({callback:e,once:n}),this._events[t]=r,this},once:function(t,e){this.on(t,e,!0)},off:function(t,e){if("undefined"==typeof t)this._events={};else if("undefined"==typeof e)this._events[t]=[];else{var n,r=this._events[t]||[];for(n=r.length-1;n>=0;n--)r[n]===e&&r.splice(n,1)}return this},trigger:function(t){var e,n,r=[].slice.call(arguments,1),i=this._events[t]||[],o=[];for(e=0;e<i.length;e++)n=i[e],n.callback?n.callback.apply(null,r):n.once=!0,n.once&&o.push(e);for(e=o.length-1;e>=0;e--)i.splice(o[e],1);return this}},o=r.createNonEnumerable(i);t.exports=o},function(t,e,n){"use strict";var r=n(6),i=function(t){var e={};for(var n in t)e[n]={writable:!0,configurable:!0,enumerable:!1,value:t[n]};return e},o={set:function(t,e){var n=t,r=this.__.trans;if("undefined"!=typeof e&&(n={},n[t]=e),!r){for(var i in n)r=r||this[i]!=n[i];if(!r)return this}return this.__.notify("merge",this,n)},reset:function(t){return this.__.notify("replace",this,t)},getListener:function(){return this.__.notify("listener",this)},toJS:function(){var t;return t=this.constructor==Array?new Array(this.length):{},r.each(this,function(e,n){e&&e.__?t[n]=e.toJS():t[n]=e}),t},transact:function(){return this.__.notify("transact",this)},run:function(){return this.__.notify("run",this)}},a=r.extend({push:function(t){return this.append([t])},append:function(t){return t&&t.length?this.__.notify("splice",this,[this.length,0].concat(t)):this},pop:function(){return this.length?this.__.notify("splice",this,[this.length-1,1]):this},unshift:function(t){return this.prepend([t])},prepend:function(t){return t&&t.length?this.__.notify("splice",this,[0,0].concat(t)):this},shift:function(){return this.length?this.__.notify("splice",this,[0,1]):this},splice:function(t,e,n){return this.__.notify("splice",this,arguments)}},o),s=Object.create(Array.prototype,i(a)),u={Hash:Object.create(Object.prototype,i(r.extend({remove:function(t){var e=[],n=t;t.constructor!=Array&&(n=[t]);for(var r=0,i=n.length;i>r;r++)this.hasOwnProperty(n[r])&&e.push(n[r]);return e.length?this.__.notify("remove",this,e):this}},o))),List:s,arrayMethods:a};t.exports=u},function(t,e,n){"use strict";var r=n(6),i=n(8),o=n(7),a={freeze:function(t,e,n){if(t&&t.__)return t;var o,a,s=this;return o=t.constructor==Array?this.createArray(t.length):Object.create(i.Hash),r.addNE(o,{__:{listener:!1,parents:[],notify:e,dirty:!1,freezeFn:n}}),r.each(t,function(t,r){a=t&&t.constructor,(a==Array||a==Object)&&(t=s.freeze(t,e,n)),t&&t.__&&s.addParent(t,o),o[r]=t}),n(o),o},update:function(t,e,n){return this[t]?this[t](e,n):r.error("Unknown update type: "+t)},reset:function(t,e){var n,i=this;return e&&e.__?(n=e,n.__.listener=e.__.listener,n.__.parents=[],this.fixChildren(n,t),r.each(n,function(e){e&&e.__&&(i.removeParent(t),i.addParent(e,n))})):n=this.freeze(t,t.__.notify,t.__.freezeFn),n},merge:function(t,e){var n=t.__.trans;if(n){for(var i in e)n[i]=e[i];return t}var o,a,s,u,c=this,f=this.copyMeta(t),h=t.__.notify;r.each(t,function(n,r){return u=n&&n.__,u&&c.removeParent(n,t),(o=e[r])?(a=o&&o.constructor,(a==Array||a==Object)&&(o=c.freeze(o,h,t.__.freezeFn)),o&&o.__&&c.addParent(o,f),delete e[r],void(f[r]=o)):(u&&c.addParent(n,f),f[r]=n)});for(s in e)o=e[s],a=o&&o.constructor,(a==Array||a==Object)&&(o=c.freeze(o,h,t.__.freezeFn)),o&&o.__&&c.addParent(o,f),f[s]=o;return t.__.freezeFn(f),this.refreshParents(t,f),f},replace:function(t,e){var n=this,r=e&&e.constructor,i=t.__,o=e;(r==Array||r==Object)&&(o=n.freeze(e,i.notify,i.freezeFn),o.__.parents=i.parents,i.listener&&(o.__.listener=t.__.listener),o.__.listener&&this.trigger(o,"update",o));for(var a=i.parents.length-1;a>=0;a--)0==a?this.refresh(i.parents[a],t,o,!1):this.markDirty(i.parents[a],[t,o]);return o},remove:function(t,e){var n=t.__.trans;if(n){for(var i=e.length-1;i>=0;i--)delete n[e[i]];return t}var o,a=this,s=this.copyMeta(t);return r.each(t,function(n,r){o=n&&n.__,o&&a.removeParent(n,t),-1==e.indexOf(r)&&(o&&a.addParent(n,s),s[r]=n)}),t.__.freezeFn(s),this.refreshParents(t,s),s},splice:function(t,e){var n=t.__.trans;if(n)return n.splice.apply(n,e),t;var i,o,a=this,s=this.copyMeta(t),u=e[0],c=u+e[1],f=t.__;if(r.each(t,function(e,n){e&&e.__&&(a.removeParent(e,t),(u>n||n>=c)&&a.addParent(e,s)),s[n]=e}),e.length>1)for(var h=e.length-1;h>=2;h--)o=e[h],i=o&&o.constructor,(i==Array||i==Object)&&(o=this.freeze(o,f.notify,f.freezeFn)),o&&o.__&&this.addParent(o,s),e[h]=o;return Array.prototype.splice.apply(s,e),t.__.freezeFn(s),this.refreshParents(t,s),s},transact:function(t){var e,n=this,i=t.__.trans;return i?i:(e=t.constructor==Array?[]:{},r.each(t,function(t,n){e[n]=t}),t.__.trans=e,r.nextTick(function(){t.__.trans&&n.run(t)}),e)},run:function(t){var e=this,n=t.__.trans;if(!n)return t;r.each(n,function(n,r){n&&n.__&&e.removeParent(n,t)}),delete t.__.trans;var i=this.replace(t,n);return i},refresh:function(t,e,n,i){var o=this,a=t.__.trans,s=0;if(a)return r.each(a,function(r,i){s||r==e&&(a[i]=n,s=1,n&&n.__&&o.addParent(n,t))}),t;var u,c,f,h=this.copyMeta(t),l=t.__.dirty;return l&&(u=l[0],c=l[1]),r.each(t,function(r,i){r==e?r=n:r==u&&(r=c),r&&(f=r.__)&&(!f.trans&&f.dirty&&(r=o.refresh(r,f.dirty[0],f.dirty[1],!0)),o.removeParent(r,t),o.addParent(r,h)),h[i]=r}),t.__.freezeFn(h),t.__.dirty=!1,i?h:void this.refreshParents(t,h)},fixChildren:function(t,e){var n=this;r.each(t,function(r){if(r&&r.__){if(-1!=r.__.parents.indexOf(t))return n.fixChildren(r);if(1==r.__.parents.length)return r.__.parents=[t];e&&n.removeParent(r,e),n.addParent(t)}})},copyMeta:function(t){var e;e=t.constructor==Array?this.createArray(t.length):Object.create(i.Hash);var n=t.__;return r.addNE(e,{__:{notify:n.notify,listener:n.listener,parents:n.parents.slice(0),trans:n.trans,dirty:!1,freezeFn:n.freezeFn}}),e},refreshParents:function(t,e){var n,r=t.__;if(r.listener&&this.trigger(e,"update",e),r.parents.length)for(n=r.parents.length-1;n>=0;n--)0==n?this.refresh(r.parents[n],t,e,!1):this.markDirty(r.parents[n],[t,e]);else r.listener&&r.listener.trigger("immediate",t,e)},markDirty:function(t,e){var n,r=t.__;for(r.dirty=e,r.trans&&this.refresh(t,e[0],e[1]),n=r.parents.length-1;n>=0;n--)this.markDirty(r.parents[n],e)},removeParent:function(t,e){var n=t.__.parents,r=n.indexOf(e);-1!=r&&n.splice(r,1)},addParent:function(t,e){var n=t.__.parents,r=n.indexOf(e);-1==r&&(n[n.length]=e)},trigger:function(t,e,n){var i=t.__.listener,o=i.ticking;i.ticking=n,o||r.nextTick(function(){var t=i.ticking;i.ticking=!1,i.trigger(e,t)})},createListener:function(t){var e=t.__.listener;return e||(e=Object.create(o,{_events:{value:{},writable:!0}}),t.__.listener=e),e},createArray:function(){return[].__proto__?function(t){var e=new Array(t);return e.__proto__=i.List,e}:function(t){var e=new Array(t),n=i.arrayMethods;for(var r in n)e[r]=n[r];return e}}()};t.exports=a}])});